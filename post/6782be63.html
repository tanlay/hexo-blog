<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="个人博客系统"><meta name="keywords" content="Nginx, Zabbix, Shell, Python, OPS, HA"><link rel="stylesheet" type="text/css" href="//fonts.loli.net/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.4"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.4"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><title>Docker学习 | MINT</title></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Docker学习</h1><a id="logo" href="/.">MINT</a><p class="description">感谢平庸与我随行!</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="搜索"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">Docker学习</h1><div class="post-meta"><a href="/post/6782be63.html#comments" class="comment-count"></a><p><span class="date">Aug 13, 2019</span><span><a href="/categories/Docker/" class="category">Docker</a></span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><p>Docker是Docker项目开发的一种容器格式。docker命令可以运行、停止、启动、检查容器。</p>
<h4 id="Docker-Hub-Registry"><a href="#Docker-Hub-Registry" class="headerlink" title="Docker Hub Registry"></a>Docker Hub Registry</h4><p>提供了个人与组织保存和开发Docker容器镜像的地方</p>
<h4 id="Docker镜像和容器"><a href="#Docker镜像和容器" class="headerlink" title="Docker镜像和容器"></a>Docker镜像和容器</h4><p>容器化的目的是将应用程序运行所需要的所有组件集合在一个单一而独立的单元中。对于Docker来说，这个单元被称为镜像。</p>
<p>镜像：是一个静态单元，它是容器运行的应用程序以及应用程序执行所需要的库、配置文件、可执行程序或者其他组件。</p>
<p>容器：指的是一个已运行的Docker镜像的实例。</p>
<h4 id="Docker命令"><a href="#Docker命令" class="headerlink" title="Docker命令"></a>Docker命令</h4><ul>
<li>查找Docker组件的信息<ul>
<li>docker version：查看docker版本</li>
<li>docker info：查看docker系统信息</li>
<li>docker help：查看与docker命令一起使用的命令或选项</li>
<li>docker history：查看镜像历史</li>
<li>docker inspect：查看镜像或者容器信息</li>
<li>docker port：列出容器的端口映射</li>
</ul>
</li>
<li>操作正在运行的容器<ul>
<li>docker ps：列出正在运行的容器</li>
<li>docker attach：将另一个命令附加到正在运行的容器上</li>
<li>docker exec：在正在运行的容器中执行命令</li>
<li>docker inspect：审查容器的元数据</li>
<li>docker cp：从容器中复制文件到宿主机</li>
<li>docker diff：检查容器从启动后其文件系统所做的改变</li>
</ul>
</li>
<li>操作镜像<ul>
<li>docker images：查看系统上的镜像</li>
<li>docker run：运行镜像</li>
<li>docker pull：从registry上拉取镜像</li>
<li>docker push：将镜像传到registry中</li>
<li>docker save：将镜像保存为tarball</li>
<li>docker load：将tarball加载到本地镜像</li>
<li>docker export：从容器中将文件系统导出成本地文件系统的tarball文件</li>
</ul>
</li>
<li>操作Docker Registry<ul>
<li>docker search：在registry中搜索镜像</li>
<li>docker login：登陆到Docker Hub Registry（可以通过自己的账号推送拉取镜像）</li>
<li>docker logout：从Docker Hub Registry中登出</li>
</ul>
</li>
<li>修改现存的镜像<ul>
<li>docker tag：未镜像添加一个名字</li>
<li>docker rename：修改镜像名字</li>
</ul>
</li>
<li>修改容器的状态<ul>
<li>docker stop：停止正在运行的容器</li>
<li>docker start：启动已经停止的容器</li>
<li>docker restart：重启启动容器</li>
<li>docker pause：暂停正在运行的容器</li>
<li>docker unpause：重新启动已经暂停的容器</li>
<li>docker kill：向容器发送kill信号或其他信号</li>
</ul>
</li>
<li>查看Docker的活动<ul>
<li>docker events：查看Docker服务器的事件</li>
<li>docker top：查看容器的进程</li>
<li>docker logs：查看容器产生的日志消息</li>
<li>docker stats：查看容器的CPU和内存使用统计</li>
<li>docker wait：查看容器直到它停止</li>
</ul>
</li>
<li>创建镜像和容器：<ul>
<li>docker build：从头构建镜像</li>
<li>docker commit：从容器创建镜像</li>
<li>docker create：从镜像创建容器但是不运行它</li>
<li>docker import：将文件系统导入镜像中</li>
</ul>
</li>
</ul>
<h3 id="部署搭建Docker运行环境"><a href="#部署搭建Docker运行环境" class="headerlink" title="部署搭建Docker运行环境"></a>部署搭建Docker运行环境</h3><h4 id="在Centos7系统中安装docker"><a href="#在Centos7系统中安装docker" class="headerlink" title="在Centos7系统中安装docker"></a>在Centos7系统中安装docker</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[mint@ali-mint ~]$ sudo yum -y install epel-release</span><br><span class="line">[mint@ali-mint ~]$ sudo yum -y install docker</span><br><span class="line">[mint@ali-mint ~]$ systemctl restart docker</span><br><span class="line">[mint@ali-mint ~]$ systemctl enabled docker</span><br><span class="line">[mint@ali-mint ~]$ systemctl status docker</span><br><span class="line">[mint@ali-mint ~]$ docker version</span><br></pre></td></tr></table></figure>

<h4 id="在ubuntu系统安装docker"><a href="#在ubuntu系统安装docker" class="headerlink" title="在ubuntu系统安装docker"></a>在ubuntu系统安装docker</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[mint@ali-mint ~]$ sudo apt -y update</span><br><span class="line">[mint@ali-mint ~]$ sudo apt -y install docker.io</span><br><span class="line">[mint@ali-mint ~]$ sudo service docker.io restart</span><br><span class="line">[mint@ali-mint ~]$ sduo service docker.io status</span><br><span class="line">[mint@ali-mint ~]$ sudo dpkg-qurey -L docker.io | less</span><br></pre></td></tr></table></figure>

<h3 id="搭建Docker-Registry"><a href="#搭建Docker-Registry" class="headerlink" title="搭建Docker Registry"></a>搭建Docker Registry</h3><h3 id="运行容器镜像"><a href="#运行容器镜像" class="headerlink" title="运行容器镜像"></a>运行容器镜像</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[mint@ali-mint ~]$ docker run centos cat /etc/os-release</span><br><span class="line">NAME="CentOS Linux"</span><br><span class="line">VERSION="7 (Core)"</span><br><span class="line">ID="centos"</span><br><span class="line">ID_LIKE="rhel fedora"</span><br><span class="line">VERSION_ID="7"</span><br><span class="line">PRETTY_NAME="CentOS Linux 7 (Core)"</span><br><span class="line">ANSI_COLOR="0;31"</span><br><span class="line">CPE_NAME="cpe:/o:centos:centos:7"</span><br><span class="line">HOME_URL="https://www.centos.org/"</span><br><span class="line">BUG_REPORT_URL="https://bugs.centos.org/"</span><br><span class="line"></span><br><span class="line">CENTOS_MANTISBT_PROJECT="CentOS-7"</span><br><span class="line">CENTOS_MANTISBT_PROJECT_VERSION="7"</span><br><span class="line">REDHAT_SUPPORT_PRODUCT="centos"</span><br><span class="line">REDHAT_SUPPORT_PRODUCT_VERSION="7"</span><br></pre></td></tr></table></figure>

<p>执行以上docker run centos cat /etc/os-release命令则docker引擎会进行以下操作 </p>
<ul>
<li>寻找镜像: 到centos:latest的镜像，本地仓库没有则会到Docker.io的registry查找，并下载centos:lateset</li>
<li>执行命令: cat命令会显示出/etc/os-release文件的内容</li>
</ul>
<p>以上命令执行只是打印/etc/os-release文件的内容，打印完就执行完了。可以使用docker images查看本地系统的镜像，docker ps查看正在运行的容器，docker ps -a查看所有容器，如果需要重新启动该容器，则需要使用docker start命令启动容器</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[mint@ali-mint ~]$ docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">fedora              latest              ef49352c9c21        11 days ago         246MB</span><br><span class="line">ubuntu              latest              3556258649b2        2 weeks ago         64.2MB</span><br><span class="line">centos              latest              9f38484d220f        5 months ago        202MB</span><br><span class="line">[mint@ali-mint ~]$ docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                 CREATED             STATUS                      PORTS               NAMES</span><br><span class="line">12572b653b36        centos              "cat /etc/os-release"   16 minutes ago      Exited (0) 16 minutes ago                       upbeat_noyce</span><br><span class="line">[mint@ali-mint ~]$ docker start -i 12572b653b36</span><br><span class="line">NAME="CentOS Linux"</span><br><span class="line">VERSION="7 (Core)"</span><br><span class="line">ID="centos"</span><br><span class="line">ID_LIKE="rhel fedora"</span><br><span class="line">VERSION_ID="7"</span><br><span class="line">PRETTY_NAME="CentOS Linux 7 (Core)"</span><br><span class="line">ANSI_COLOR="0;31"</span><br><span class="line">CPE_NAME="cpe:/o:centos:centos:7"</span><br><span class="line">HOME_URL="https://www.centos.org/"</span><br><span class="line">BUG_REPORT_URL="https://bugs.centos.org/"</span><br><span class="line"></span><br><span class="line">CENTOS_MANTISBT_PROJECT="CentOS-7"</span><br><span class="line">CENTOS_MANTISBT_PROJECT_VERSION="7"</span><br><span class="line">REDHAT_SUPPORT_PRODUCT="centos"</span><br><span class="line">REDHAT_SUPPORT_PRODUCT_VERSION="7"</span><br></pre></td></tr></table></figure>

<p>此时使用docker start -i 12572b653b36，-i 选项把容器的输出定向到本地shell中</p>
<h4 id="以交互式运行容器镜像"><a href="#以交互式运行容器镜像" class="headerlink" title="以交互式运行容器镜像"></a>以交互式运行容器镜像</h4><p>常见的例子，打开一个shell在容器内部直接进行操作。可以方便查看容器内部情况并修改内容。以下我通过执行/bin/bash命令打开一个容器的shell进行交互</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[mint@ali-mint ~]$ docker run -it centos /bin/bash</span><br><span class="line">[root@10962ad1fb5c /]#</span><br><span class="line">[root@10962ad1fb5c /]# ps -e</span><br><span class="line">  PID TTY          TIME CMD</span><br><span class="line">    1 pts/0    00:00:00 bash</span><br><span class="line">   14 pts/0    00:00:00 ps</span><br></pre></td></tr></table></figure>

<p>此时已经来到容器内部了，可以通过主机名来看，如果主机名没有变化，可以通过执行ps -e命令来查看正在运行的命令来判断。</p>
<p>也可以在容器中执行命令，使用yum命令添加更多程序到容器中。可以使用exit退出容器shell，还可以通过docker commit命令制作新的镜像，需要使用docker ps -a查询到该容器的容器ID,本地系统就有一个名为testrun的镜像了并可以为接下来的docker run做准备</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@10962ad1fb5c /]# yum -y install httpd vsftpd httpd-manual net-tools iproute</span><br><span class="line">[root@10962ad1fb5c /] exit</span><br><span class="line">[mint@ali-mint ~]$ docker commit 10962ad1fb5c testrun</span><br><span class="line">sha256:b38aa80475139935155a341257cb03f4b7cf6279f2a93b509d6a8daab60b8578z</span><br><span class="line">[mint@ali-mint ~]$ docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED              SIZE</span><br><span class="line">testrun             latest              b38aa8047513        About a minute ago   356MB</span><br></pre></td></tr></table></figure>

<h4 id="在容器内运行管理命令"><a href="#在容器内运行管理命令" class="headerlink" title="在容器内运行管理命令"></a>在容器内运行管理命令</h4><p>想在运行容器之后结束后，容器自动销毁，可以添加–rm选项。这样就不会有太多无用容器占用磁盘空间。执行ip和route命令依赖于之前安装的net-tools和iproute命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[mint@ali-mint ~]$ docker run -it --rm testrun /usr/sbin/ip addr show eth0</span><br><span class="line">266: eth0@if267: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default </span><br><span class="line">    link/ether 02:42:ac:12:00:02 brd ff:ff:ff:ff:ff:ff link-netnsid 0</span><br><span class="line">    inet 172.18.0.2/16 brd 172.18.255.255 scope global eth0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">[mint@ali-mint ~]$ docker run -it --rm testrun /usr/sbin/route -n</span><br><span class="line">Kernel IP routing table</span><br><span class="line">Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span><br><span class="line">0.0.0.0         172.18.0.1      0.0.0.0         UG    0      0        0 eth0</span><br><span class="line">172.18.0.0      0.0.0.0         255.255.0.0     U     0      0        0 eth0</span><br><span class="line">[mint@ali-mint ~]$ ip addr show docker0</span><br><span class="line">3: docker0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN group default </span><br><span class="line">    link/ether 02:42:29:b8:4b:2f brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 172.18.0.1/16 brd 172.18.255.255 scope global docker0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure>

<p>前两个docker命令查询到容器内的网络情况，接下来的IP命令显示了宿主机的docker0网络接口，它的一个IP地址172.18.0.1/16。默认情况下，宿主机会在容器启动时通过DHCP给容器分配地址。testrun运行的第一个ip地址为172.18.0.2/16。如果再次运行容器将会生成新的地址。因为通过run命令每次会生成新的容器。</p>
<p>通过route可以看到容器的默认网关是172.18.0.1，刚好是宿主机docker0网络接口的IP地址。通过宿主机的docker0接口进行路由能够让容器访问本地宿主机之外的网络资源</p>
<h4 id="运行容器化服务"><a href="#运行容器化服务" class="headerlink" title="运行容器化服务"></a>运行容器化服务</h4><p>使用容器运行服务由以下优势：</p>
<ul>
<li>配置：能够提前配置好所需的全部可执行程序，库，配置文件等无需担心宿主机是否提供这些组件，还方便将容器迁移至另一台服务器</li>
<li>隔离：每个容器都有自己的文件系统和网络接口，所以能够运行多个相同的服务容器</li>
</ul>
<p>使用docker简单构件apache web服务器，apache会默认监听80和443端口。首先创建宿主机目录，添加index.html文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[mint@ali-mint ~]$ mkdir /var/www/html/</span><br><span class="line">[mint@ali-mint ~]$ cat  /var/www/html/index.html                                 </span><br><span class="line">The Apache Web Server is Running!</span><br></pre></td></tr></table></figure>

<p>使用之前构建的testrun镜像，执行以下命令前确保宿主机的80和443没有被占用</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[mint@ali-mint ~]$ docker run -d -p 80:80 -p 443:443 --name=MyWebServer -v /var/www/:/var/www/ testrun /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">da04638d9afc285111bd0eb51c4e73b0651c3e73ab14af997fb9f31e46cd6fe0</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>选线</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>-d</td>
<td>让容器化命令在后台运行容器</td>
</tr>
<tr>
<td>-p 80:80 -p 443:443</td>
<td>映射端口，将容器端口映射到宿主机的端口上，冒号左边是宿主机端口，右边是容器端口。这里是将容器的80和443端口分别映射到宿主机的80和443端口上</td>
</tr>
<tr>
<td>–name=MyWebServer</td>
<td>指定容器名，之后可以通过容器名来操作容器，而不用通过难记的容器ID操作</td>
</tr>
<tr>
<td>-v /var/www:/var/www</td>
<td>挂载卷，将宿主机（冒号左边）的目录挂载到容器（冒号右边）的目录</td>
</tr>
<tr>
<td>testrun</td>
<td>镜像名称</td>
</tr>
<tr>
<td>/usr/sbin/httpd -DFOREGROUND</td>
<td>使用-DFOREGROUND选项来运行httpd守护进程</td>
</tr>
</tbody></table>
<p>此时使用docker ps可以看到该容器，看到容器被分配了容器ID，使用的镜像testrun，运行的命令是httpd，容器是在11分钟之前创建的，宿主机上所有IPv4的网络接口将会对80和443端口的请求转发到容器内对应的端口上。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[mint@ali-mint ~]$ docker ps </span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                                      NAMES</span><br><span class="line">da04638d9afc        testrun             "/usr/sbin/httpd -DF…"   11 minutes ago      Up 11 minutes       0.0.0.0:80-&gt;80/tcp, 0.0.0.0:443-&gt;443/tcp   MyWebServer</span><br></pre></td></tr></table></figure>

<p>也可以使用docker exec进入容器，按exit退出容器。</p>
<p>因为容器的80端口已经映射到宿主机的80上，所以通过访问宿主机的80端口即可访问到文件/var/www/html/index.html的内容。因为安装过httpd-manual包。所以还可以通过浏览器访问宿主机地址的80端口下的/manual页面可以访问到httpd的manual页</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[mint@ali-mint ~]$ docker exec -it MyWebServer /bin/bash </span><br><span class="line">[root@da04638d9afc /]# exit</span><br><span class="line">exit</span><br><span class="line">[mint@ali-mint ~]$ curl localhost</span><br><span class="line">The Apache Web Server is Running!</span><br></pre></td></tr></table></figure>

<h4 id="在容器中运行服务时进行资源限制"><a href="#在容器中运行服务时进行资源限制" class="headerlink" title="在容器中运行服务时进行资源限制"></a>在容器中运行服务时进行资源限制</h4><p>默认情况下，容器运行时，容器访问内存、CPU方面是没有限制的，可以使用–memory、–momory-swap、–cpu-shares和–cpuset-cpus选项来限制可以使用的内存和CPU。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[mint@ali-mint ~]$ docker run -d -p 80:80 -p 443:443 --name=MyWebServer -v /var/www/:/var/www/ --memory=10m --memory-swap=-1 --cpu-shares=256 testrun /usr/sbin/httpd -DFOREGROUND ec5e1a8281f0f8406187431f1eb3a5b46e864ab85adf2aadc8c5eddc1698a8fb</span><br></pre></td></tr></table></figure>

<ul>
<li>–memory=10m：容器可以使用10m的内存</li>
<li>–memory-swap=-1：容器可以无限制使用交换空间，如果不设置默认为memory的2倍（20m）</li>
<li>–cpu-shares=256： 在1024范围内设置CPU配额。设置256只占1024的25%</li>
<li>–cpuset-cpus=0,1：使用CPU核0或1</li>
<li>–cpuset-cpus=3：使用第四个CPU核</li>
<li>–cpuset-cpus=1-3：使用CPU核1，2或3</li>
</ul>
<h4 id="运行特权容器"><a href="#运行特权容器" class="headerlink" title="运行特权容器"></a>运行特权容器</h4><p>大多数情况下，运行docker容器时，会限制访问宿主机或其他容器的访问以及其他容器访问我正在运行的容器。然而有些特殊情况下，想要让容器拥有更大的宿主机系统访问权限。这种容器就成为特权容器</p>
<table>
<thead>
<tr>
<th>选线</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>–ipc</td>
<td>IPC：开放访宿主机的进程间通信设施。默认情况下，每个容器都有私有的IPC功能设施</td>
</tr>
<tr>
<td>–net-host</td>
<td>网络接口：向容器开放宿主机的网路接口。容器默认都有自己的网络接口</td>
</tr>
<tr>
<td>–pid=host</td>
<td>进程表：允许容器访问进程表。容器默认有自己的进程表</td>
</tr>
<tr>
<td>-e HOST=/host</td>
<td>宿主机文件系统：如果设置了，HOST环境变量会告诉容器将宿主机的root文件系统挂载到容器的某个目录上，推荐挂载在/host下</td>
</tr>
<tr>
<td>–privileged</td>
<td>这一选项会关闭容器运行命令的安全隔离。因此，以root运行的进程拥有宿主机上以root运行任何进程是同样的权限</td>
</tr>
</tbody></table>
<h3 id="查找、拉取、保存和装载容器镜像"><a href="#查找、拉取、保存和装载容器镜像" class="headerlink" title="查找、拉取、保存和装载容器镜像"></a>查找、拉取、保存和装载容器镜像</h3><h4 id="搜索镜像"><a href="#搜索镜像" class="headerlink" title="搜索镜像"></a>搜索镜像</h4><p>使用docker search命令搜索镜像</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[mint@ali-mint ~]$ docker search centos</span><br><span class="line">[mint@ali-mint ~]$ docker search ubuntu</span><br><span class="line">[mint@ali-mint ~]$ docker search nginx</span><br><span class="line">[mint@ali-mint ~]$ docker search mysql</span><br><span class="line">[mint@ali-mint ~]$ docker search jenkins</span><br></pre></td></tr></table></figure>

<p>也可以细化搜索</p>
<ul>
<li>-s：查找star数至少是多少的</li>
<li>–no-trunc：告诉docker search不要截取描述字段</li>
<li>automated=true：只显示定期自动重新构建的镜像</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[mint@ali-mint ~]$ docker search -s 100 centos</span><br><span class="line">[mint@ali-mint ~]$ docker search --no-trunc=true mysql</span><br><span class="line">[mint@ali-mint ~]$ docker search --automated=true centos</span><br></pre></td></tr></table></figure>

<h4 id="在Docker-Hub上检索镜像"><a href="#在Docker-Hub上检索镜像" class="headerlink" title="在Docker Hub上检索镜像"></a>在Docker Hub上检索镜像</h4><p>通过web浏览器访问<a href="https://registry.hub.docker.com/" target="_blank" rel="noopener">Docker Hub Registry</a>，可以找到镜像的很多信息。如果需要查找多个镜像的文档，可以访问<a href="https://github.com/docker-library/doc" target="_blank" rel="noopener">Docker Library</a>，找到相应镜像并查看其文档</p>
<ul>
<li>支持的镜像版本</li>
<li>用来运行镜像的基本docke run命令</li>
<li>配合docker run使用环境变量，这些变量可以更改镜像设置</li>
<li>这个容器镜像在github页面的位置</li>
<li>用于构建该镜像的Dockerfile文件</li>
</ul>
<h4 id="从Docker-Registry上拉取镜像"><a href="#从Docker-Registry上拉取镜像" class="headerlink" title="从Docker Registry上拉取镜像"></a>从Docker Registry上拉取镜像</h4><p>通过docker pull命令可以从docker registry上拉取镜像，可以从Docker Hub Registry上拉取，也可以从自建的docker registry上拉取。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[mint@ali-mint ~]$ docker pull centos</span><br><span class="line">[mint@ali-mint ~]$ docker pull mysql</span><br><span class="line">[mint@ali-mint ~]$ docker pull nginx</span><br><span class="line">[mint@ali-mint ~]$ docker pull 172.16.100.10:5000/centos</span><br><span class="line">[mint@ali-mint ~]$ docker pull 172.16.100.10:5000/mysql</span><br><span class="line">[mint@ali-mint ~]$ docker pull 172.16.100.10:5000/nginx</span><br></pre></td></tr></table></figure>

<h4 id="保存和装载镜像"><a href="#保存和装载镜像" class="headerlink" title="保存和装载镜像"></a>保存和装载镜像</h4><p>拉取镜像并不是将镜像放入Docker的唯一方式，还可以把镜像保存为tarball，然后copy到其他系统中，并装载它。</p>
<p>以下使用docker save命令将centos进行保存为一个tarball。tarball文件都包含了要构成保存镜像所需要的层，再将tar拷贝到另一个运行Docker服务的系统后，可使用docker load命令装载它并查看结果</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[mint@ali-mint ~]$ docker save -o centos7.tar centos</span><br><span class="line">[mint@ali-mint ~]$ scp centos7.tar 172.18.9.50:/tmp</span><br><span class="line">[test@test ~]$ docker load -i /tmp/centos7.tar</span><br><span class="line">[test@test ~]$ docker images|grep centos</span><br></pre></td></tr></table></figure>

<h3 id="为镜像做标签"><a href="#为镜像做标签" class="headerlink" title="为镜像做标签"></a>为镜像做标签</h3><h3 id="分析容器"><a href="#分析容器" class="headerlink" title="分析容器"></a>分析容器</h3><p>每个镜像所附带的信息包含了默认配置、创建者信息以及何时以何种方式创建的细节。在容器运行后，容器会包含额外的信息，如容器的网络配置、容器是否正在运行以及挂载卷的信息。</p>
<p>在容器或镜像上运行docker inspect命令可以查看与之关联的底层数据。在用镜像或容器调试问题时，很有帮助。例如查看容器IP地址可以了解客户端程序（Web浏览器）去哪里寻找容器中运行的服务。docker inspect采用json格式显示，方便阅读。</p>
<h4 id="用docker-inspect检视基础镜像"><a href="#用docker-inspect检视基础镜像" class="headerlink" title="用docker inspect检视基础镜像"></a>用docker inspect检视基础镜像</h4><p>通过检视镜像可以大致了解到镜像的创建时间、构建镜像使用的Docker版本，对外开放的端口等信息。以下例子检视了最新的centos镜像。倘若centos:latest尚未拉取到我的本地系统，该命令会先拉取对应镜像并检视它。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line">[mint@ali-mint ~]$ docker inspect centos</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">"Id"</span>: <span class="string">"sha256:9f38484d220fa527b1fb19747638497179500a1bed8bf0498eb788229229e6e1"</span>,</span><br><span class="line">        <span class="attr">"RepoTags"</span>: [</span><br><span class="line">            <span class="string">"centos:latest"</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">"RepoDigests"</span>: [</span><br><span class="line">            <span class="string">"centos@sha256:a799dd8a2ded4a83484bbae769d97655392b3f86533ceb7dd96bbac929809f3c"</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">"Parent"</span>: <span class="string">""</span>,</span><br><span class="line">        <span class="attr">"Comment"</span>: <span class="string">""</span>,</span><br><span class="line">        <span class="attr">"Created"</span>: <span class="string">"2019-03-14T21:19:53.361167852Z"</span>,</span><br><span class="line">        <span class="attr">"Container"</span>: <span class="string">"958baf5225f586da9c70a21e911a0a875402dd22d83133d78b3b3aa6130e7892"</span>,</span><br><span class="line">        <span class="attr">"ContainerConfig"</span>: &#123;</span><br><span class="line">            <span class="attr">"Hostname"</span>: <span class="string">"958baf5225f5"</span>,</span><br><span class="line">            <span class="attr">"Domainname"</span>: <span class="string">""</span>,</span><br><span class="line">            <span class="attr">"User"</span>: <span class="string">""</span>,</span><br><span class="line">            <span class="attr">"AttachStdin"</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">"AttachStdout"</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">"AttachStderr"</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">"Tty"</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">"OpenStdin"</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">"StdinOnce"</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">"Env"</span>: [</span><br><span class="line">                <span class="string">"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"</span></span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">"Cmd"</span>: [</span><br><span class="line">                <span class="string">"/bin/sh"</span>,</span><br><span class="line">                <span class="string">"-c"</span>,</span><br><span class="line">                <span class="string">"#(nop) "</span>,</span><br><span class="line">                <span class="string">"CMD [\"/bin/bash\"]"</span></span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">"ArgsEscaped"</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">"Image"</span>: <span class="string">"sha256:294e8d8145287e70f07328cc09d840fad8980b801223321b983442f097aff0d8"</span>,</span><br><span class="line">            <span class="attr">"Volumes"</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="attr">"WorkingDir"</span>: <span class="string">""</span>,</span><br><span class="line">            <span class="attr">"Entrypoint"</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="attr">"OnBuild"</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="attr">"Labels"</span>: &#123;</span><br><span class="line">                <span class="attr">"org.label-schema.build-date"</span>: <span class="string">"20190305"</span>,</span><br><span class="line">                <span class="attr">"org.label-schema.license"</span>: <span class="string">"GPLv2"</span>,</span><br><span class="line">                <span class="attr">"org.label-schema.name"</span>: <span class="string">"CentOS Base Image"</span>,</span><br><span class="line">                <span class="attr">"org.label-schema.schema-version"</span>: <span class="string">"1.0"</span>,</span><br><span class="line">                <span class="attr">"org.label-schema.vendor"</span>: <span class="string">"CentOS"</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"DockerVersion"</span>: <span class="string">"18.06.1-ce"</span>,</span><br><span class="line">        <span class="attr">"Author"</span>: <span class="string">""</span>,</span><br><span class="line">        <span class="attr">"Config"</span>: &#123;</span><br><span class="line">            <span class="attr">"Hostname"</span>: <span class="string">""</span>,</span><br><span class="line">            <span class="attr">"Domainname"</span>: <span class="string">""</span>,</span><br><span class="line">            <span class="attr">"User"</span>: <span class="string">""</span>,</span><br><span class="line">            <span class="attr">"AttachStdin"</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">"AttachStdout"</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">"AttachStderr"</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">"Tty"</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">"OpenStdin"</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">"StdinOnce"</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">"Env"</span>: [</span><br><span class="line">                <span class="string">"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"</span></span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">"Cmd"</span>: [</span><br><span class="line">                <span class="string">"/bin/bash"</span></span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">"ArgsEscaped"</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">"Image"</span>: <span class="string">"sha256:294e8d8145287e70f07328cc09d840fad8980b801223321b983442f097aff0d8"</span>,</span><br><span class="line">            <span class="attr">"Volumes"</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="attr">"WorkingDir"</span>: <span class="string">""</span>,</span><br><span class="line">            <span class="attr">"Entrypoint"</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="attr">"OnBuild"</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="attr">"Labels"</span>: &#123;</span><br><span class="line">                <span class="attr">"org.label-schema.build-date"</span>: <span class="string">"20190305"</span>,</span><br><span class="line">                <span class="attr">"org.label-schema.license"</span>: <span class="string">"GPLv2"</span>,</span><br><span class="line">                <span class="attr">"org.label-schema.name"</span>: <span class="string">"CentOS Base Image"</span>,</span><br><span class="line">                <span class="attr">"org.label-schema.schema-version"</span>: <span class="string">"1.0"</span>,</span><br><span class="line">                <span class="attr">"org.label-schema.vendor"</span>: <span class="string">"CentOS"</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"Architecture"</span>: <span class="string">"amd64"</span>,</span><br><span class="line">        <span class="attr">"Os"</span>: <span class="string">"linux"</span>,</span><br><span class="line">        <span class="attr">"Size"</span>: <span class="number">201782942</span>,</span><br><span class="line">        <span class="attr">"VirtualSize"</span>: <span class="number">201782942</span>,</span><br><span class="line">        <span class="attr">"GraphDriver"</span>: &#123;</span><br><span class="line">            <span class="attr">"Data"</span>: &#123;</span><br><span class="line">                <span class="attr">"MergedDir"</span>: <span class="string">"/var/lib/docker/overlay2/dd869486238678b7bcbb999984ed8bfacb66603d9172b622d5dc18128ef81a19/merged"</span>,</span><br><span class="line">                <span class="attr">"UpperDir"</span>: <span class="string">"/var/lib/docker/overlay2/dd869486238678b7bcbb999984ed8bfacb66603d9172b622d5dc18128ef81a19/diff"</span>,</span><br><span class="line">                <span class="attr">"WorkDir"</span>: <span class="string">"/var/lib/docker/overlay2/dd869486238678b7bcbb999984ed8bfacb66603d9172b622d5dc18128ef81a19/work"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">"Name"</span>: <span class="string">"overlay2"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"RootFS"</span>: &#123;</span><br><span class="line">            <span class="attr">"Type"</span>: <span class="string">"layers"</span>,</span><br><span class="line">            <span class="attr">"Layers"</span>: [</span><br><span class="line">                <span class="string">"sha256:d69483a6face4499acb974449d1303591fcbb5cdce5420f36f8a6607bda11854"</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"Metadata"</span>: &#123;</span><br><span class="line">            <span class="attr">"LastTagTime"</span>: <span class="string">"0001-01-01T00:00:00Z"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>从这些输出可以看出很多信息。该容器体系结构是amd64的，兼容64PC机。该镜像创建时没有定义Comment和Author。Config部分设置了容器运行的环境。</p>
<p>如果运行时没有指定其他命令，默认会运行/bin/bash命令。由于与标准输入、标准输出和标准错误的关联被设置为false。因此在运行该容器时要指定一些选项（docker run -it centos）。Env设置了PATH变量，定义了运行命令是用于查找命令的目录。</p>
<h4 id="查看镜像历史"><a href="#查看镜像历史" class="headerlink" title="查看镜像历史"></a>查看镜像历史</h4><p>可以在基础镜像是上构建生成新镜像。每次在镜像上运行新命令。就会长生一个新的容器层。如果这些层与镜像保存在一起就可以使用docker history命令查看这些信息。</p>
<p>要查看镜像历史，只要该镜像上执行docker history命令即可</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[mint@ali-mint ~]$ docker history centos</span><br><span class="line">IMAGE               CREATED             CREATED BY                                      SIZE                COMMENT</span><br><span class="line">9f38484d220f        5 months ago        /bin/sh -c #(nop)  CMD ["/bin/bash"]            0B                  </span><br><span class="line">&lt;missing&gt;           5 months ago        /bin/sh -c #(nop)  LABEL org.label-schema.sc…   0B                  </span><br><span class="line">&lt;missing&gt;           5 months ago        /bin/sh -c #(nop) ADD file:074f2c974463ab38c…   202MB</span><br></pre></td></tr></table></figure>

<p>可以看到，镜像是5个月前构建的，并修改了3次，还可以看到生成镜像的shell命令。之后容器如果使用了IMAGE列的任何镜像层，就不必在拉去那个层，而只要使用系统中已经存在的这个层就可以了。</p>
<h4 id="检视正在运行的容器"><a href="#检视正在运行的容器" class="headerlink" title="检视正在运行的容器"></a>检视正在运行的容器</h4><p>以下例子使用centos镜像通过python命令和SimpleHTTPServer组件运行一个简单的Web服务器</p>
</div><div class="post-copyright"><blockquote><p>原文作者: Mr.Chen</p><p>原文链接: <a href="http://www.dookt.com/post/6782be63.html">http://www.dookt.com/post/6782be63.html</a></p><p>版权声明: 转载请注明出处(必须保留原文作者署名原文链接)</p></blockquote></div><div class="tags"><a href="/tags/容器/">容器</a></div><div class="post-share"><div class="social-share"><span>分享到:</span></div></div><div class="post-nav"><a href="/post/a583c2ce.html" class="next">Centos安装vmware虚拟机报错</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#Docker-Hub-Registry"><span class="toc-text">Docker Hub Registry</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Docker镜像和容器"><span class="toc-text">Docker镜像和容器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Docker命令"><span class="toc-text">Docker命令</span></a></li></ol><li class="toc-item toc-level-3"><a class="toc-link" href="#部署搭建Docker运行环境"><span class="toc-text">部署搭建Docker运行环境</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#在Centos7系统中安装docker"><span class="toc-text">在Centos7系统中安装docker</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#在ubuntu系统安装docker"><span class="toc-text">在ubuntu系统安装docker</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#搭建Docker-Registry"><span class="toc-text">搭建Docker Registry</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#运行容器镜像"><span class="toc-text">运行容器镜像</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#以交互式运行容器镜像"><span class="toc-text">以交互式运行容器镜像</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#在容器内运行管理命令"><span class="toc-text">在容器内运行管理命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#运行容器化服务"><span class="toc-text">运行容器化服务</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#在容器中运行服务时进行资源限制"><span class="toc-text">在容器中运行服务时进行资源限制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#运行特权容器"><span class="toc-text">运行特权容器</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查找、拉取、保存和装载容器镜像"><span class="toc-text">查找、拉取、保存和装载容器镜像</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#搜索镜像"><span class="toc-text">搜索镜像</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#在Docker-Hub上检索镜像"><span class="toc-text">在Docker Hub上检索镜像</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#从Docker-Registry上拉取镜像"><span class="toc-text">从Docker Registry上拉取镜像</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#保存和装载镜像"><span class="toc-text">保存和装载镜像</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#为镜像做标签"><span class="toc-text">为镜像做标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#分析容器"><span class="toc-text">分析容器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#用docker-inspect检视基础镜像"><span class="toc-text">用docker inspect检视基础镜像</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查看镜像历史"><span class="toc-text">查看镜像历史</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#检视正在运行的容器"><span class="toc-text">检视正在运行的容器</span></a></li></ol></li></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/post/6782be63.html">Docker学习</a></li><li class="post-list-item"><a class="post-list-link" href="/post/a583c2ce.html">Centos安装vmware虚拟机报错</a></li><li class="post-list-item"><a class="post-list-link" href="/post/b2e09379.html">k8s平台搭建</a></li><li class="post-list-item"><a class="post-list-link" href="/post/c6b0c30c.html">Nginx设置为系统服务</a></li><li class="post-list-item"><a class="post-list-link" href="/post/a2c1797d.html">Tomcat设置为系统服务</a></li><li class="post-list-item"><a class="post-list-link" href="/post/7df7e5a.html">Python编写zabbix告警邮件</a></li><li class="post-list-item"><a class="post-list-link" href="/post/4120479c.html">DockerFile生成镜像</a></li><li class="post-list-item"><a class="post-list-link" href="/post/d936a15c.html">Jenkins发布脚本</a></li><li class="post-list-item"><a class="post-list-link" href="/post/d6261197.html">k8s-一个简单的例子</a></li><li class="post-list-item"><a class="post-list-link" href="/post/41380.html">Mysql设置权限</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Docker/">Docker</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Jenkins/">Jenkins</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/K8S/">K8S</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">32</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MySQL/">MySQL</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Nginx/">Nginx</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/k8s/">k8s</a><span class="category-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/Nginx/" style="font-size: 15px;">Nginx</a> <a href="/tags/FTP/" style="font-size: 15px;">FTP</a> <a href="/tags/系统管理/" style="font-size: 15px;">系统管理</a> <a href="/tags/高可用/" style="font-size: 15px;">高可用</a> <a href="/tags/Docker/" style="font-size: 15px;">Docker</a> <a href="/tags/数据库/" style="font-size: 15px;">数据库</a> <a href="/tags/Scripts/" style="font-size: 15px;">Scripts</a> <a href="/tags/Jenkins/" style="font-size: 15px;">Jenkins</a> <a href="/tags/虚拟化/" style="font-size: 15px;">虚拟化</a> <a href="/tags/Python基础/" style="font-size: 15px;">Python基础</a> <a href="/tags/Zabbix/" style="font-size: 15px;">Zabbix</a> <a href="/tags/监控/" style="font-size: 15px;">监控</a> <a href="/tags/磁盘管理/" style="font-size: 15px;">磁盘管理</a> <a href="/tags/Tomcat/" style="font-size: 15px;">Tomcat</a> <a href="/tags/运维基本功/" style="font-size: 15px;">运维基本功</a> <a href="/tags/系统命令/" style="font-size: 15px;">系统命令</a> <a href="/tags/容器/" style="font-size: 15px;">容器</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a></li></ul></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">网站地图</a> |  <a href="/atom.xml">订阅本站</a> |  <a href="/about/">联系博主</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次，本站总访客数:<i id="busuanzi_container_site_uv"><i id="busuanzi_value_site_uv"></i></i>人</p><p><span> Copyright &copy;<a href="/." rel="nofollow">Mr.Chen.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?c6588ff9864e03b5fbcbba5a323ad966";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();
</script><script type="text/javascript" src="/js/search.json.js?v=2.0.4"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.4" async></script><link rel="stylesheet" type="text/css" href="/share/css/share.css"><script type="text/javascript" src="/share/js/social-share.js" charset="utf-8"></script><script type="text/javascript" src="/share/js/qrcode.js" charset="utf-8"></script></body></html>